<html>

<head>
  <meta charset="utf-8" />
</head>

<body>
  <script>(() => { "use strict"; const t = () => Math.random().toString(16).substr(2), e = t => new Promise(((e, r) => { setTimeout((() => { e(void 0) }), t) })); class r { constructor(t) { this.x = t } map(t) { return new r(this.x) } } const n = (t, e) => e((t => new r(t)))(t).x; class o { constructor(t) { this.value = t, this.ref = 1, this.watchers = [], this[Symbol.asyncIterator] = async function* () { let t = this.ref; for (yield this.value; ;)t !== this.ref ? (t = this.ref, yield this.value) : await new Promise((t => { this.watchers.push(t) })) } } async notify(t) { const e = "function" == typeof t ? t(this.value) : t; if (e !== this.value) { this.value = e, this.ref += 1; for (const t of this.watchers.splice(0, this.watchers.length)) t(void 0) } } focus(...t) { const e = this; let r = []; return { [Symbol.asyncIterator]: async function* () { for await (const o of e) { const e = t.map((t => n(o, t))); (e.length !== r.length || e.some(((t, e) => t !== r[e]))) && (r = e, yield o) } } } } } Symbol.asyncIterator; const i = (() => { const t = document.createElement("div"); return e => (t.innerText = e, t.innerHTML) })(), s = async (r, n = {}) => { if (Array.isArray(r)) { const [o, i, ...a] = r, l = Object.entries(i).reduce(((t, [e, r]) => ("$" === e[0] && (t[e] = r), t)), { ...n }), h = []; try { for (const t of a) h.push(await s(t, l)) } catch (t) { if (i.errorBoundary) return i.errorBoundary; throw t } if ("string" == typeof o) return [o, i, ...h]; const u = o({ ...l, ...i, children: h }); if (null === u || "object" != typeof u || Array.isArray(u)) return await s(u, l); let y; const d = async t => { do { await e(0) } while (t && !document.getElementById(y)); const r = document.getElementById(y); if (!r) return void await u.return(); const n = await u.next(r); if (n.done) return; const o = await s(n.value, l); if (!Array.isArray(o)) throw new Error(`Expect component to rerender a tag, not ${o}`); const [i, a, ...h] = o; if (i !== r.tagName.toLowerCase()) throw new Error(`Expect component to rerender with tag ${r.tagName.toLowerCase()}, not tag ${i}`); Object.assign(r, a); const f = {}; r.innerHTML = h.map((t => c(t, y, f))).join(" "), d(!1) }, f = await u.next(); if (f.done) return null; const w = await s(f.value, l); if (!Array.isArray(w)) throw new Error(`Expect component to return a tag, not ${w}`); const [, g] = w; return y = g.id || t(), g.id = y, d(!0), w } return r }, a = async function* ({ Body: t, totalHeight: e }) { const r = new o(0), n = yield ["div", { style: "height: 100%; position: relative;" }]; yield ["div", { style: "height: 100%; position: relative;" }, ["div", { style: "height: 100%; overflow-y: auto; width: 100%", onscroll: t => { r.notify(t.target.scrollTop) } }, ["div", { style: `height: ${e}px;` }]], ["div", { style: "height: 100%; overflow-y: hidden; position: absolute; top: 0px; width: calc(100% - 18px);" }, [t, { height: n && n.offsetHeight || 100, scrollOb: r }]]] }, c = (e, r = "GLOBAL", n = {}) => { if (Array.isArray(e)) { const [i, l, ...h] = e, u = Object.fromEntries((s = ([e, o]) => { if ("on" !== e.substr(0, 2)) return [e, o]; { const i = e + "-" + t(); return glob[r] = n, n[i] = t => o(t), [e, `glob['${r}']['${i}'](event)`] } }, a = l, { reduce: o = (t, e) => (a.reduce ? a : Object.entries(a)).reduce(((e, r) => t(e, s(r))), e), [Symbol.iterator]: function* () { yield* o(((t, e) => (t.push(e), t)), []) } })), y = h.map((t => c(t, r, n))); return "Fragment" === i ? y.join("") : `<${i} ${Object.entries(u).map((([t, e]) => void 0 !== e ? `${t}="${e}"` : t)).join(" ")}>${y.join("")}</${i}>` } var o, s, a; return null === e ? "" : i(String(e)) }; (async () => { window.glob = {}, document.body.innerHTML = c(await s([() => { const t = new Array(1e5).fill(0).map((() => Math.random().toString(36).substr(2))); return ["div", { style: "width: 200px; height: 400px;" }, [a, { totalHeight: 19 * t.length, Body: async function* ({ height: e, scrollOb: r }) { for await (const n of r) { const r = Math.round(n / 19), o = Math.ceil(e / 19); yield ["div", {}, ...t.slice(r, r + o).map(((t, e) => ["div", { style: "height: 19px;" }, `${1 + r + e}: ${t}`]))] } } }]] }, {}])) })() })();</script>
</body>

</html>