<html>

<head>
  <meta charset="utf-8" />
</head>

<body>
  <script>
    (() => { "use strict"; const t = t => new Promise(((e, r) => { setTimeout((() => { e(void 0) }), t) })); Symbol.asyncIterator, document.createElement("div"); const e = async (r, n = {}) => { if (!Array.isArray(r)) return null === r ? [] : [document.createTextNode(String(r))]; const [o, i, ...a] = r, s = Object.entries(i).reduce(((t, [e, r]) => ("$" === e[0] && (t[e] = r), t)), { ...n }); if ("string" == typeof o) { const t = []; try { for (const r of a) t.push(...await e(r, s)) } catch (t) { if (i.errorBoundary) return [document.createTextNode(String(i.errorBoundary))]; throw t } if ("Fragment" === o) return t; const r = document.createElement(o); for (const [t, e] of Object.entries(i)) t.startsWith("on") ? r.addEventListener(t.substr(2), e) : t.startsWith("$") || r.setAttribute(t, String(e)); for (const e of t) r.appendChild(e); return [r] } const c = o({ ...s, ...i, children: a }); if (null === c || "object" != typeof c || Array.isArray(c)) return await e(c, s); const u = async (r, n) => { do { await t(0) } while (n && !r.isConnected); if (!r.isConnected) return void await c.return(); const o = await c.next(r); if (o.done) return; const i = await e(o.value, s); if (1 !== i.length) throw new Error(`Expect component to return single element, not ${i.length} elements`); const a = i[0]; if (a.tagName !== r.tagName) throw new Error(`Expect component to rerender with tag ${r.tagName.toLowerCase()}, not tag ${a.tagName.toLocaleLowerCase()}`); for (const t of a.getAttributeNames()) { const e = a.getAttribute(t); null !== e && r.setAttribute(t, e) } r.replaceChildren(...a.childNodes), u(r, !1) }, d = await c.next(); if (d.done) return []; const l = await e(d.value, s); if (1 !== l.length) throw new Error(`Expect component to return single node, not ${l.length} nodes`); return u(l[0], !0), l }; (async () => { const t = ({ number: t, $size: e }) => ["div", {}, `Size here at ${t} is ${e}`]; document.body.replaceChildren(...await e([() => ["div", {}, [t, { number: 1 }], ["div", {}, ["div", { $size: "large" }, [t, { number: 2 }]]], [t, { number: 3 }]], { $size: "small" }])) })() })();
  </script>
</body>

</html>